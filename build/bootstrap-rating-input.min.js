!function(a){var b={round:{down:.25,up:.75}};a.fn.redraw=function(c){function d(c,d){var e=(d-Math.floor(d)).toFixed(2),f=Math.ceil(d);0!=e&&(f-=1);var g=a(c).find("[data-value="+f+"]");g.removeClass("fa-star-o").addClass("fa-star"),g.prevAll("[data-value]").removeClass("fa-star-o").addClass("fa-star"),g.nextAll("[data-value]").removeClass("fa-star").addClass("fa-star-o");var h=g.next("[data-value]"),i="fa-star-o";e>b.round.down&&(i="fa-star-half-o",e>b.round.up&&(i="fa-star")),h.removeClass("fa-star-o").addClass(i)}var e=this;d(e.closest(".rating-input"),c)},a.fn.rating=function(){function b(b){var c=a(b);c.find("[data-value]").removeClass("fa-star").addClass("fa-star-o")}function c(a,b){a.val(b).trigger("change"),b===a.data("empty-value")?a.siblings(".rating-clear").hide():a.siblings(".rating-clear").show()}var d;for(d=this.length-1;d>=0;d--){var e,f,g=a(this[d]),h=g.data("max")||5,i=g.data("min")||0,j=g.data("clearable")||null,k=g.data("readonly")||null,l="";for(f=i;h>=f;f++)l+=['<span class="fa fa-star-o"       data-value="',f,'"></span>'].join("");j&&!k&&(l+=[' <a class="rating-clear" style="display:none;" href="javascript:void">','<span class="glyphicon glyphicon-remove"></span> ',j,"</a>"].join(""));var m=g.clone(!0).attr("type","hidden").data("max",h).data("min",i);e=['<div class="rating-input">',l,"</div>"].join(""),g.replaceWith(a(e).append(m))}a(".rating-input").on("mouseenter","[data-value]",function(){var b=a(this).closest(".rating-input").find(".rating"),c=b.data("readonly");if(!c){var d=a(this);d.redraw(d.data("value"))}}).on("mouseleave","[data-value]",function(){var c=a(this),d=c.siblings("input"),e=d.val(),f=d.data("min"),g=d.data("max");e>=f&&g>=e?c.redraw(e):b(c.closest(".rating-input"))}).on("click","[data-value]",function(b){var d=a(this).closest(".rating-input").find(".rating"),e=d.data("readonly");if(!e){var f=a(this),g=f.data("value"),h=f.siblings("input");return c(h,g),b.preventDefault(),a.ajax({}),!1}}).on("click",".rating-clear",function(d){var e=a(this),f=e.siblings("input");return c(f,f.data("empty-value")),b(e.closest(".rating-input")),d.preventDefault(),!1}).each(function(){var c=a(this).find("input"),d=c.val(),e=c.data("min"),f=c.data("max");""!==d&&+d>=e&&f>=+d?(a(this).redraw(d),a(this).find(".rating-clear").show()):(c.val(c.data("empty-value")),b(this))})},a(function(){a("input.rating[type=number]").length>0&&a("input.rating[type=number]").rating()})}(jQuery);